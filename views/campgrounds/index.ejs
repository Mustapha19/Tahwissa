<% layout('layouts/boilerplate')%>
<div id="cluster-map" class="mt-3"></div>
<div class="container mt-2">
	<div class="row g-4">
		<% for (let campground of campgrounds){%>
		<div class="col-xl-6 col-lg-6 col-md-4 col-sm-6">
			<div class="card shadow">
				<div class="col">
					<% if (campground.images.length) { %>
					<a  href="/campgrounds/<%=campground._id %>"><img class="card-img-top img-fluid rounded" src="<%=campground.images[0].url%>" alt=""></a>
					<% }else{%>
					<img class="card-img-top img-fluid rounded"
						src="https://codespeedy.com/wp-content/uploads/2019/03/Chrome-Broken-Image-Icon.png" alt="">
					<%}%>
				</div>

				<div class="card-body">
					<h5 class="card-title fw-bold">
						<%= campground.title %>
					</h5>
					<p class="card-text">
						<% if (campground.description.length>150) { %>
						<%= campground.description.substring(0, 150)+'...' %>
							
						<%}else {%>
						<%= campground.description+'...' %> 
					</p>
					<%}%>
					<p class="card-text">
						<small class="text-muted">
							<i class="bi bi-geo-alt">
								<%=campground.location %>
							</i>
						</small>
					</p>
					<a class="btn btn-primary" href="/campgrounds/<%=campground._id %>">
						View <%=campground.title %>
					</a>
				</div>

			</div>
		</div>
		<%}%>
		</div>
	</div>
	<script>
		const mapToken = '<%-process.env.MAPBOX_TOKEN%>';
		const campgrounds = { features: <%- JSON.stringify(campgrounds) %>}
	</script>
	<script src="/js/clusterMap.js"></script>